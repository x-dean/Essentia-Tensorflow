version: '3.8'

services:
  web-ui:
    build:
      context: ./web-ui
      dockerfile: Dockerfile.dev
    volumes:
      # Mount source code for hot reloading
      - ./web-ui/src:/app/src
      - ./web-ui/public:/app/public
      - ./web-ui/package.json:/app/package.json
      - ./web-ui/tsconfig.json:/app/tsconfig.json
      - ./web-ui/vite.config.ts:/app/vite.config.ts
      - ./web-ui/tailwind.config.js:/app/tailwind.config.js
      - ./web-ui/postcss.config.js:/app/postcss.config.js
    environment:
      - NODE_ENV=development
    # Override command for development
    command: ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "3000"]

  playlist-app:
    volumes:
      # Enable source code mounting for development
      - ./src:/app/src:ro
